1. aws로 이전.

legacy.php {
 html + css+js+pdp+sql
 }
 
 정책적으로 합의가 있었는데
 
 2가지 방향으로 논의가 있었다.
 
 켠김에 왕까지 vs 한번에 하나씩  
 -> 레거시의 비지니스를 알고있는 사람이 얼마없는데... 이방법은 힘들어...  
  그래서 스트랭글러 패턴으로 처리함 점진적으로 교체하여 레거시 시스템을 단계적으로 마이그레이션  
  
  스트랭슬러 파사드를 레거시, 모던 상위에 두고 점점 모던의 비중을 늘린다.
  
  배민의 선택 1. front / backend 나눔
  
  새로운 플랫폼을 구축하기위해 **아키텍쳐 원칙** 새움
  
  backend일단 옴기고 리팩토링하는 방식으로 선택함.
  > 기존 레거시를 어떻게 통합하지??
  1. 원격 프로시저 호출
  공유 라이브러리를 두고 하는방식 강하고 좋긴하나 공유라이브러리에 의존하는 방법이 있다.
  하지만 php버전이 5.5이상부터 사용할 수 있어서 이부분은 포기했다.
  
  2. 레스트풀로 하자
  웹으로 기반하고 잘 구축되어있다.
  스웨거를 사용하여 프론트엔드를 위한 벡엔드 api 문서화하였다.
  > 문서를 위한 스웨거 어노테이션을 달다보니 소스코드에 부담이 왔다 그러하여 손으로 작업함 선문서를 작성하고 api개발하다보니 더 유용했다.
  
  원격호출 프론트에 케시영역 마지막에 성공값 리턴
  
  api게이트웨이 단일화된 엔드포인트 생성 
  > 스프링 클라우드 넷플릭스로 사용하였다.  
  > ios,and 서로 다른 메시지를 원할때도 편리하다.
  
  프리마커로 만듬.
  
  줄로 리버시프록시를 내가 해결 가능한 프록시인가 판단해서 줄로 넘겨버림
  줄은 자기에게 등록된 서비스 호출하고 그대로 돌려준다.
  
  리버스프록시를 이렇게 써먹으면 좋아영
  레거시 웹 사용해서 test 해봅시다.
  
  
  환경별로 환경파일을 관리가 어렵다
  설정정보 실행환경에 두는 식으로 처리하자.
  
  application-*.yml로 확장하여서 사용하였다 spring.profile을 붙여서 사용했다
  
   aws-ec2, aws lambda를 둘다 사용하다보니 spring cloud를 사용하였다  
   
   배민 consul로 환경구성함
   java + php 때문에 선택 다양한 솔루션을 대응할 수 있었기 때문에
   > consule client 사용 
  클라이언트 풀링방식으로 작동한다.
  
  민감정보 암복호화 '{cipher} +키값'를 붙이면 자동으로 암복호화를 처리한다.
  